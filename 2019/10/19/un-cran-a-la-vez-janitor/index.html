<!DOCTYPE html>
<html lang="es-ar"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.58.3" />
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Un CRAN a la vez: janitor | el RadaR</title>
	
	

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Un CRAN a la vez: janitor"/>
<meta name="twitter:description" content="Así damos inicio a la sección dada a llamar Un CRAN a la vez (inspirada en este proyecto de la gran Danielle Navarro), mostrando lo que hace una simpática biblioteca llamada janitor, hecha por Sam Firke y subida aqui, en conjunción con nuestro querido tidyverse."/>

	<meta property="og:title" content="Un CRAN a la vez: janitor" />
<meta property="og:description" content="Así damos inicio a la sección dada a llamar Un CRAN a la vez (inspirada en este proyecto de la gran Danielle Navarro), mostrando lo que hace una simpática biblioteca llamada janitor, hecha por Sam Firke y subida aqui, en conjunción con nuestro querido tidyverse." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2019/10/19/un-cran-a-la-vez-janitor/" />
<meta property="article:published_time" content="2019-10-19T16:38:25-03:00" />
<meta property="article:modified_time" content="2019-10-19T00:00:00+00:00" />


	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
	 crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	<link href="/css/medium.css" rel="stylesheet">
	<link href="/css/additional.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://elradar.github.io/">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/post">Posts</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="mainheading">
    <h1 class="sitetitle">el RadaR</h1>
    <p class="lead">
         detectando los paquetes y proyectos en R que tenes que conocer
    </p>
</div><div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Compartir</p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Un%20CRAN%20a%20la%20vez%3a%20janitor&url=%2f2019%2f10%2f19%2fun-cran-a-la-vez-janitor%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=%2f2019%2f10%2f19%2fun-cran-a-la-vez-janitor%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>

        <li class="ml-1 mr-1">
        <a target="_blank" href="https://www.xing.com/spi/shares/new?url=%2f2019%2f10%2f19%2fun-cran-a-la-vez-janitor%2f" onclick="window.open(this.href, 'xing-share', 'width=550,height=435');return false;">
        <i class="fab fa-xing"></i>
        </a>
        </li>        
    </ul>

    
        <div class="sep">
        </div>				
        <ul>
            <li> 
            <a  class="small smoothscroll" href="#disqus_thread"></a>
            </li>
        </ul>
    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        	
                                                
                        
                        <h1 class="posttitle">Un CRAN a la vez: janitor</h1> 
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <p>Así damos inicio a la sección dada a llamar <strong>Un CRAN a la vez</strong> (inspirada en <a href="https://djnavarro.net/post/a-random-walk-on-cran/">este proyecto</a> de la gran Danielle Navarro), mostrando lo que hace una simpática biblioteca llamada janitor, hecha por Sam Firke y subida <a href="https://github.com/sfirke/janitor">aqui</a>, en conjunción con nuestro querido tidyverse.</p>

<pre><code class="language-r">
library(tidyverse)
library(janitor)

</code></pre>

<p>janitor es una biblioteca que ayuda a limpiar nombres de columnas que vienen formateados de forma subóptima (para ser generosos) para el análisis de datos. Generalmente sirve para aquellos Excel que nos pasan con nombres de columna con tildes, puntos como separadores, duplicados, entre otros problemillas. Para aquellos que saben inglés, Alison Hill (/apresshill en Twitter) hizo una ilustración sobre este paquete que es bastante informativa:</p>

<p><img src="https://pbs.twimg.com/media/ED1UxS4U8AEh31k?format=jpg&amp;name=medium" alt="" /></p>

<p>Veamos un ejemplo (real) de un dataset, truncado por temas de confidencialidad, en el que una biblioteca como janitor nos vino al pelo.</p>

<pre><code class="language-r">

datos_originales &lt;- read.csv(&quot;https://elradar.github.io/data/data_janitor.csv&quot;)

</code></pre>

<p>Al husmear la estructura del dataset, vemos que las columnas <em>Género</em> y <em>Teléfono</em> tienen tilde, lo cual es muy correcto a nivel idiomático pero muy desaconsejado a nivel pragmático ya que tener caracteres especiales en el nombre de  lascolumnas puede afectar muchas operaciones (que se encuentran penadas y adaptadas al inglés, o el esperanto de la era digital).
Por otro lado, podemos ver que en muchas de las columnas han decidido usar el punto como separador de palabras. Esto tiene más que ver con convención (o hedonismo estético) que por utilidad pero en general se prefiere utilizar el guión bajo o underscore como separador. Por último, que los nombres de las columnas se encuentren enteramente en minúscula no nos vendría mal para ahorrar tiempo si tipeamos (el viaje de ida y vuelta al Caps Lock).</p>

<pre><code class="language-r">
datos_limpios &lt;- datos_originales %&gt;% 
  clean_names()
  
colnames(datos_limpios)

</code></pre>

<p>Lo primero que salta a la vista es que janitor y tidyverse se llevan increíblemente bien. Lo segundo, es que con una simple función todas las variables perdieron los caracteres especiales (en nuestro caso las tildes), los puntos fueron reemplazador por &ldquo;_&rdquo; como separadores y todo está en bella letra minúscula.
 Vamos a ver si hay filas enteramente vacías (todo es posible cuando viene de Excel), que tengan siempre el mismo valor (categoría constante) y si hay alguna línea duplicada.</p>

<pre><code class="language-r">
datos_limpios &lt;- datos_originales %&gt;% 
  clean_names() %&gt;% 
  remove_empty(&quot;rows&quot;) %&gt;% 
  remove_constant() %&gt;% 
  convert_to_NA(&quot;factor&quot;)

duplicados &lt;- datos_limpios %&gt;% 
  get_dupes()


dim(datos_limpios)
dim(duplicados)

</code></pre>

<p>No tenemos filas vacías ni duplicados (tenemos la misma cantidad de observaciones) aunque sí encontró una fila con todos valores constantes y la removió (fecha_ult_ingreso).</p>

<pre><code class="language-r">
datos_limpios &lt;- datos_limpios %&gt;% 
  mutate(genero = recode(genero,
                           &quot;A&quot; = &quot;hombre&quot;,
                           &quot;B&quot; = &quot;mujer&quot;),
         apoyo_espiritual = recode(apoyo_espiritual,
                           &quot;A&quot; = &quot;no quiso&quot;,
                           &quot;B&quot; = &quot;tuvo apoyo&quot;))

</code></pre>

<p>Una gran ventaja de janitor es que nos permite además es hacer tablas relativamente lindas de manera sencilla y compatibles con el pipe de magrittr (%&gt;%) que popularizó el tidyverse. Vamos a cruzar la variable género con apoyo espiritual.</p>

<pre><code class="language-r">
datos_limpios %&gt;% 
  tabyl(genero, apoyo_espiritual)

</code></pre>

<p>Genial, tenemos la cantidad de casos en cada celda. Pero, ¿no nos interesaría mucho más poder ver estos mismos datos como porcentajes?</p>

<pre><code class="language-r">
datos_limpios %&gt;% 
  tabyl(genero, apoyo_espiritual) %&gt;% 
  adorn_totals(&quot;row&quot;) %&gt;%   ##muestra el total por categoria de columna
  adorn_percentages(&quot;row&quot;) %&gt;% ##nos muestra las celdas en porcentajes
  adorn_pct_formatting() %&gt;% ##formatea el porcentaje de manera legible
  adorn_ns() %&gt;% ##le suma a cada celda el número de casos absolutos entre paréntesis
  adorn_title() ##le suma el título del cruce en la esquina superior izquierda
  
  
</code></pre>

<p>Y así tenemos una tabla bastante linda, con bastante margen de formateo y sin salir del universo tidyverse (yey). Por supuesto que no sacaremos ninguna conclusión sobre estos datos ya que forman parte de una muestra no aleatoria ni representativa de un conjunto de información no disponible (aún) para su publicación.</p>

<p><strong>BONUS TRACK</strong>: Otra joyita que tiene esta biblioteca janitor es la función excel_numeric_to_date() para hacer ingeniería inversa de aquellas fechas de Excel que llegan como enteros a R (si les pasó alguna vez reconocerán rápido este problema)</p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/limpieza">limpieza</a>
                        </li>
                        
                        <li>
                        <a href="/tags/transformacion">transformacion</a>
                        </li>
                        
                        <li>
                        <a href="/tags/etl">ETL</a>
                        </li>
                        
                        <li>
                        <a href="/tags/datawrangling">datawrangling</a>
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="/2019/10/19/un-cran-a-la-vez-janitor/"> &laquo; Un CRAN a la vez: janitor</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="/2019/10/18/otro-post-con-un-cl%C3%A1sico-inolvidable/">Otro post, con un clásico inolvidable &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">              
                           
        </div>
    </div>
</div>

    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light"> Ver también <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/data-wrangling">data-wrangling</a>
			
			<a class="mt-1 mb-1" href="/tags/datawrangling">datawrangling</a>
			
			<a class="mt-1 mb-1" href="/tags/etl">etl</a>
			
			<a class="mt-1 mb-1" href="/tags/limpieza">limpieza</a>
			
			<a class="mt-1 mb-1" href="/tags/transformacion">transformacion</a>
			
		</div>
	</div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright equipo el RadaR
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                Mediumish Theme por WowThemes.net
            </div>
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<script src="/js/mediumish.js"></script>

    </body>
</html>
